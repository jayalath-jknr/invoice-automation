<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { 
      font-family: Inter, Arial, Helvetica, sans-serif; 
      background: #f6f8fb; 
      padding: 20px; 
      margin: 0;
      display: flex;
      justify-content: center;
    }
    .canvas { 
      background: white; 
      border-radius: 10px; 
      box-shadow: 0 6px 18px rgba(20,30,60,0.08); 
      padding: 20px; 
      max-width: 1000px;
      width: 100%;
    }
    svg { 
      width: 100%; 
      height: auto;
      overflow: visible; 
      display: block;
    }
    /* Shape Styles */
    .parallelogram { fill: #e8f6ff; stroke: #0b5fa5; stroke-width: 2; }
    .process { fill: #ffffff; stroke: #2b4158; stroke-width: 2; rx: 8; }
    .process-db { fill: #e3f2fd; stroke: #1565c0; stroke-width: 2; rx: 8; }
    .decision { fill: #fff; stroke: #2b4158; stroke-width: 2; }
    
    /* OCR Specific Styles */
    .ocr-process { fill: #fff0f5; stroke: #c2185b; stroke-width: 2; rx: 8; }
    .ocr-decision { fill: #fce4ec; stroke: #880e4f; stroke-width: 2; }
    
    /* Logic Specific Styles */
    .llm-process { fill: #f3e5f5; stroke: #7b1fa2; stroke-width: 2; rx: 8; }
    .logic-decision { fill: #fff; stroke: #f57f17; stroke-width: 2; }

    /* Text Styles */
    text { font-size: 13px; fill: #0b1630; font-family: sans-serif; }
    .label { font-size: 14px; fill: #16324a; font-weight: 700; }
    .sub-label { font-size: 11px; fill: #546e7a; }
    .ocr-label { font-size: 13px; fill: #880e4f; font-weight: 700; }
    .arrowtext { font-size: 11px; fill: #37474f; background-color: white; font-weight: 600; padding: 2px; }
    
  </style>
</head>
<body>
  <div class="canvas">
    <svg viewBox="0 0 1000 1600" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto" markerUnits="strokeWidth">
          <path d="M0 0 L10 5 L0 10 z" fill="#2b4158" />
        </marker>
        <marker id="arrow-ocr" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto" markerUnits="strokeWidth">
          <path d="M0 0 L10 5 L0 10 z" fill="#c2185b" />
        </marker>
        <marker id="arrow-logic" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto" markerUnits="strokeWidth">
          <path d="M0 0 L10 5 L0 10 z" fill="#f57f17" />
        </marker>
      </defs>

      <g transform="translate(300, 20)">
        <polygon class="parallelogram" points="50,0 400,0 350,60 0,60" />
        <text x="200" y="35" text-anchor="middle" class="label">Data Input: PDFs & Images</text>
      </g>

      <path d="M400 80 L300 80 L300 120" stroke="#2b4158" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
      <text x="270" y="100" class="arrowtext">PDF</text>

      <path d="M600 80 L750 80 L750 150" stroke="#2b4158" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
      <text x="700" y="100" class="arrowtext">Image</text>

      <g transform="translate(300, 160)">
        <polygon class="decision" points="0,-40 60,0 0,40 -60,0" />
        <text x="0" y="5" text-anchor="middle" class="label" style="font-size:12px">Page Count?</text>
      </g>

      <path d="M240 160 L150 160 L150 220" stroke="#2b4158" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
      <text x="180" y="150" text-anchor="middle" class="arrowtext">Multi-page</text>

      <g transform="translate(50, 220)">
        <rect class="process" x="0" y="0" width="200" height="70" />
        <text x="100" y="30" text-anchor="middle" class="label">Index Extraction</text>
        <text x="100" y="50" text-anchor="middle" class="sub-label">Regex Pattern Splitting</text>
      </g>

      <path d="M360 160 L450 160 L450 330" stroke="#2b4158" stroke-width="2" fill="none"/>
      <text x="410" y="150" text-anchor="middle" class="arrowtext">Single-page</text>

      <path d="M150 290 L150 330 L300 330 L300 350" stroke="#2b4158" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
      <path d="M450 330 L300 330" stroke="#2b4158" stroke-width="2" fill="none"/>

      <g transform="translate(200, 350)">
        <rect class="process" x="0" y="0" width="200" height="70" />
        <text x="100" y="30" text-anchor="middle" class="label">PDF Text Extraction</text>
        <text x="100" y="50" text-anchor="middle" class="sub-label">Native Parsing</text>
      </g>
      
      <path d="M300 420 L300 450" stroke="#2b4158" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
      <text x="300" y="595" text-anchor="middle" class="arrowtext">text found</text>

      <g transform="translate(300, 480)">
        <polygon class="decision" points="0,-30 50,0 0,30 -50,0" />
        <text x="0" y="5" text-anchor="middle" style="font-size:11px; font-weight:bold;">Has Text?</text>
      </g>
      
      <path d="M300 510 L300 580" stroke="#2b4158" stroke-width="2" fill="none" />

      <path d="M350 480 L485 480 L485 180 L650 180"
      stroke="#b03030" 
      stroke-width="2" 
      stroke-dasharray="5,5" 
      fill="none" 
      marker-end="url(#arrow)"/>
      <text x="400" y="470" class="arrowtext" fill="#b03030">no text found</text>

      <g transform="translate(650, 150)">
        <rect class="process" x="0" y="0" width="200" height="60" />
        <text x="100" y="25" text-anchor="middle" class="label">Image Processing</text>
        <text x="100" y="45" text-anchor="middle" class="sub-label">OCR Gateway</text>
      </g>
      
      <path d="M750 210 L750 250" stroke="#c2185b" stroke-width="2" fill="none" marker-end="url(#arrow-ocr)"/>
      
      <g transform="translate(750, 290)">
        <polygon class="ocr-decision" points="0,-40 60,0 0,40 -60,0" />
        <text x="0" y="0" text-anchor="middle" class="ocr-label">Quality</text>
        <text x="0" y="15" text-anchor="middle" class="ocr-label">Check</text>
      </g>

      <path d="M690 290 L620 290 L620 360" stroke="#c2185b" stroke-width="2" fill="none" marker-end="url(#arrow-ocr)"/>
      <text x="630" y="280" class="arrowtext">High Quality</text>
      
      <g transform="translate(540, 360)">
        <rect class="ocr-process" x="0" y="0" width="160" height="70" />
        <text x="80" y="25" text-anchor="middle" class="ocr-label">Tesseract OCR</text>
        <text x="80" y="45" text-anchor="middle" class="sub-label">Fast Path (200ms)</text>
      </g>

      <path d="M810 290 L880 290 L880 360" stroke="#c2185b" stroke-width="2" fill="none" marker-end="url(#arrow-ocr)"/>
      <text x="830" y="280" class="arrowtext">Low Quality</text>

      <g transform="translate(800, 360)">
        <rect class="ocr-process" x="0" y="0" width="160" height="70" />
        <text x="80" y="25" text-anchor="middle" class="ocr-label">EZ-OCR</text>
        <text x="80" y="45" text-anchor="middle" class="sub-label">Accurate Path (2.5s)</text>
      </g>

      <path d="M620 430 L620 540 L450 540 L450 580" stroke="#c2185b" stroke-width="2" fill="none" marker-end="url(#arrow-ocr)"/>
      <path d="M880 430 L880 540 L450 540" stroke="#c2185b" stroke-width="2" fill="none" />

      <path d="M300 580 L350 580" stroke="#2b4158" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

      <g transform="translate(350, 580)">
        <rect class="process" x="0" y="0" width="200" height="60" />
        <text x="100" y="25" text-anchor="middle" class="label">Extract Vendor</text>
        <text x="100" y="45" text-anchor="middle" class="sub-label">Identify Supplier Details</text>
      </g>

      <path d="M450 640 L450 680" stroke="#2b4158" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

      <g transform="translate(450, 720)">
        <polygon class="decision" points="0,-40 70,0 0,40 -70,0" />
        <text x="0" y="5" text-anchor="middle" class="label">Vendor Exists?</text>
      </g>

      <path d="M520 720 L650 720 L650 780" stroke="#2b4158" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
      <text x="560" y="710" class="arrowtext">Yes (Known)</text>

      <g transform="translate(550, 780)">
        <rect class="process" x="0" y="0" width="200" height="60" />
        <text x="100" y="25" text-anchor="middle" class="label">Fetch Regex</text>
        <text x="100" y="45" text-anchor="middle" class="sub-label">Load parsing rules</text>
      </g>

      <path d="M380 720 L250 720 L250 760" stroke="#b03030" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
      <text x="300" y="710" class="arrowtext">No (Unknown)</text>

      <g transform="translate(150, 760)">
        <rect class="llm-process" x="0" y="0" width="200" height="60" />
        <text x="100" y="25" text-anchor="middle" class="label" style="fill:#4a148c">LLM Call 1</text>
        <text x="100" y="45" text-anchor="middle" class="sub-label">Extract Vendor + Data</text>
      </g>
      <path d="M250 820 L250 850" stroke="#7b1fa2" stroke-width="2" fill="none" marker-end="url(#arrow-logic)"/>

      <g transform="translate(150, 850)">
        <rect class="llm-process" x="0" y="0" width="200" height="60" />
        <text x="100" y="25" text-anchor="middle" class="label" style="fill:#4a148c">LLM Call 2</text>
        <text x="100" y="45" text-anchor="middle" class="sub-label">Generate Regex</text>
      </g>
      <path d="M250 910 L250 940" stroke="#7b1fa2" stroke-width="2" fill="none" marker-end="url(#arrow-logic)"/>

      <g transform="translate(150, 940)">
        <rect class="process-db" x="0" y="0" width="200" height="60" />
        <text x="100" y="25" text-anchor="middle" class="label">Save Rules</text>
        <text x="100" y="45" text-anchor="middle" class="sub-label">Store Regex & Vendor</text>
      </g>

      <path d="M250 1000 L250 1060 L350 1060" stroke="#2b4158" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
      <path d="M650 840 L650 1060 L550 1060" stroke="#2b4158" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

      <g transform="translate(350, 1030)">
        <rect class="process" x="0" y="0" width="200" height="60" />
        <text x="100" y="25" text-anchor="middle" class="label">Extract Details</text>
        <text x="100" y="45" text-anchor="middle" class="sub-label">Parse Invoice Line Items</text>
      </g>

      <path d="M450 1090 L450 1140" stroke="#2b4158" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

      <g transform="translate(450, 1180)">
        <polygon class="logic-decision" points="0,-40 80,0 0,40 -80,0" />
        <text x="0" y="0" text-anchor="middle" class="label" style="font-size:12px">Category in DB?</text>
      </g>

      <path d="M450 1220 L450 1440" stroke="#2b4158" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
      <text x="400" y="1300" class="arrowtext">Yes</text>

      <path d="M530 1180 L650 1180 L650 1230" stroke="#f57f17" stroke-width="2" fill="none" marker-end="url(#arrow-logic)"/>
      <text x="580" y="1170" class="arrowtext">No (Missing)</text>

      <g transform="translate(550, 1230)">
        <rect class="llm-process" x="0" y="0" width="200" height="80" />
        <text x="100" y="30" text-anchor="middle" class="label" style="fill:#4a148c">Ask LLM & Save</text>
        <text x="100" y="50" text-anchor="middle" class="sub-label">Predict Category</text>
        <text x="100" y="65" text-anchor="middle" class="sub-label">Save to Database</text>
      </g>

      <path d="M650 1310 L650 1440 L450 1440" stroke="#2b4158" stroke-width="2" fill="none" />

      <path d="M450 1440 L450 1480" stroke="#2b4158" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

      <g transform="translate(300, 1480)">
        <rect class="process-db" x="0" y="0" width="300" height="60" />
        <text x="150" y="25" text-anchor="middle" class="label">Save Final Data</text>
        <text x="150" y="45" text-anchor="middle" class="sub-label">Store Invoice & Categorized Items</text>
      </g>

      <path d="M450 1540 L450 1570" stroke="#2b4158" stroke-width="2" fill="none" />
      <circle cx="450" cy="1575" r="8" fill="#2b4158" />

    </svg>
  </div>
</body>
</html>